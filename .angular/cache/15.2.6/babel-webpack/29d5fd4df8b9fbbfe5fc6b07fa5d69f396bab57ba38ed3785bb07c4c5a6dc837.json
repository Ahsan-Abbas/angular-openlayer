{"ast":null,"code":"import _asyncToGenerator from \"D:/PBSGeo (Office Work)/PBSGEO (Angular Job Post)/Test Task 1/angular-openlayers/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { BaseClient, BaseResponse } from './base.js';\nimport { AbortError } from '../../utils.js';\nclass XHRResponse extends BaseResponse {\n  /**\n   * BaseResponse facade for XMLHttpRequest\n   * @param {XMLHttpRequest} xhr\n   * @param {ArrayBuffer} data\n   */\n  constructor(xhr, data) {\n    super();\n    this.xhr = xhr;\n    this.data = data;\n  }\n  get status() {\n    return this.xhr.status;\n  }\n  getHeader(name) {\n    return this.xhr.getResponseHeader(name);\n  }\n  getData() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      return _this.data;\n    })();\n  }\n}\nexport class XHRClient extends BaseClient {\n  constructRequest(headers, signal) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', this.url);\n      xhr.responseType = 'arraybuffer';\n      for (const [key, value] of Object.entries(headers)) {\n        xhr.setRequestHeader(key, value);\n      }\n\n      // hook signals\n      xhr.onload = () => {\n        const data = xhr.response;\n        resolve(new XHRResponse(xhr, data));\n      };\n      xhr.onerror = reject;\n      xhr.onabort = () => reject(new AbortError('Request aborted'));\n      xhr.send();\n      if (signal) {\n        if (signal.aborted) {\n          xhr.abort();\n        }\n        signal.addEventListener('abort', () => xhr.abort());\n      }\n    });\n  }\n  request({\n    headers,\n    signal\n  } = {}) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const response = yield _this2.constructRequest(headers, signal);\n      return response;\n    })();\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}